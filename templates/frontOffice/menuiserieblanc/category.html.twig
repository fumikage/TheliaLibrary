{%  extends 'base.html.twig' %}
{% set page = app.request.get('page')|default(1) %}
{% set category = resources('/api/front/categories/'~attr('category', 'id')) %}

{% block title %}
 {{category.i18ns.title}}
{% endblock %}

{% block body %}

	{% set products = resources('/api/front/products', {'productCategories.category.id': attr('category', 'id'), itemsPerPage:15, page: page}) %}

	{% include '@components/Layout/Subheader/Category/SubheaderCategory.html.twig' with {title: category.i18ns.title|default(''), description: category.i18ns.description|default(''), nbProducts: products|length}  %}
  
  {{ component('Flexy:Layout:CategoryProduct', {categoryId: attr('category', 'id'), page}) }}

	{# {% include '@components/Layout/Reinsurance/Reinsurance.html.twig' with { data: [
      {
        strongText: 'Free delivery' | trans,
        text: 'For any order over â‚¬100' | trans,
        linkLabel: 'See conditions' | trans,
        link: '#',
        icon: 'reinsurance-delivery'
      },
      {
        strongText: 'Secure payment' | trans,
        text: 'Credit card, Paypal' | trans,
        linkLabel: 'See conditions' | trans,
        link: '#',
        icon: 'reinsurance-payment'
      },
      {
        strongText: 'Satisfied or refunded' | trans,
        text: 'Exchange or refund offered within 30 days' | trans,
        linkLabel: 'See conditions' | trans,
        link: '#',
        icon: 'reinsurance-satisfied'
      }
    ] } %} #}
{% endblock %}
